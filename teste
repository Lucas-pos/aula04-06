import java.util.ArrayList;
import java.util.InputMismatchException;
import java.util.Scanner;

public class Catalogo {
    private ArrayList<Usuario> usuarios = new ArrayList<>();
    private ArrayList<Midias> midias = new ArrayList<>();
    private Scanner scanner = new Scanner(System.in);

    // Tela inicial (login/criar conta/sair)
    int login() {
        int opcao = -1;
        while (opcao < 1 || opcao > 3) {
            try {
                System.out.print("\n___BEM-VINDO___" +
                        "\nEntre em uma conta para ouvir seus sons!" +
                        "\n1 - Criar nova conta" +
                        "\n2 - Entrar em uma conta j√° existente" +
                        "\n3 - Sair do app" +
                        "\nDigite a op√ß√£o correspondente: ");
                opcao = scanner.nextInt();
                scanner.nextLine(); // limpa buffer
            } catch (InputMismatchException e) {
                System.out.println("‚ö† Entrada inv√°lida! Digite apenas n√∫meros.");
                scanner.nextLine(); // limpa o que foi digitado errado
            }
        }
        return opcao;
    }

    // Criar novo usu√°rio
    void criarUsuario() {
        System.out.print("Digite o nome do usu√°rio: ");
        String nomeUsuario = scanner.nextLine();

        System.out.print("Digite o e-mail do usu√°rio: ");
        String emailUsuario = scanner.nextLine();

        // Verifica se o email j√° existe
        for (Usuario u : usuarios) {
            if (u.getEmail().equalsIgnoreCase(emailUsuario)) {
                System.out.println("‚ö† J√° existe um usu√°rio cadastrado com esse e-mail!");
                return;
            }
        }

        Usuario usuario = new Usuario(nomeUsuario, emailUsuario);
        usuarios.add(usuario);
        System.out.println("‚úÖ Usu√°rio cadastrado com sucesso!");
    }

    // Menu principal do usu√°rio
    int menu() {
        int opcao = -1;
        while (opcao < 1 || opcao > 6) {
            try {
                System.out.print("\nO que deseja?" +
                        "\n1 - Criar uma playlist" +
                        "\n2 - Ver suas Playlists" +
                        "\n3 - Escolher playlist" +
                        "\n4 - Ver suas m√≠dias" +
                        "\n5 - Pesquisar m√≠dias" +
                        "\n6 - Sair da conta" +
                        "\nDigite a op√ß√£o: ");
                opcao = scanner.nextInt();
                scanner.nextLine();
            } catch (InputMismatchException e) {
                System.out.println("‚ö† Entrada inv√°lida! Digite apenas n√∫meros.");
                scanner.nextLine();
            }
        }
        return opcao;
    }

    // Escolher usu√°rio existente
    Usuario escolherUsuario() {
        if (usuarios.isEmpty()) {
            System.out.println("‚ö† Ainda n√£o h√° usu√°rios registrados!");
            return null;
        }

        System.out.println("\nContas dispon√≠veis:");
        for (Usuario conta : usuarios) {
            System.out.println("- " + conta.toString());
        }

        System.out.print("Digite o email da conta que deseja acessar: ");
        String emailEscolhido = scanner.nextLine();

        for (Usuario usuarioEscolhido : usuarios) {
            if (usuarioEscolhido.getEmail().equalsIgnoreCase(emailEscolhido)) {
                System.out.println("üë§ Bem-vindo(a), " + usuarioEscolhido.getNome() + "!");
                return usuarioEscolhido;
            }
        }

        System.out.println("‚ö† Nenhum usu√°rio encontrado com esse e-mail.");
        return null;
    }
}
